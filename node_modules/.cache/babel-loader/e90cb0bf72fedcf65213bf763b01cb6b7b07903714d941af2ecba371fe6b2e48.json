{"ast":null,"code":"import React,{useState,useRef,useEffect,useMemo}from'react';import'../styles/GameChat.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GameChat=_ref=>{let{messages,onSendMessage}=_ref;const[message,setMessage]=useState('');const messagesEndRef=useRef(null);const chatContainerRef=useRef(null);// 메시지 수 제한 (최대 50개)\nconst MAX_MESSAGES=50;// 표시할 메시지 제한\nconst limitedMessages=useMemo(()=>{// 메시지가 MAX_MESSAGES를 초과하면 최신 메시지만 표시\nreturn messages.length>MAX_MESSAGES?messages.slice(messages.length-MAX_MESSAGES):messages;},[messages]);// 메시지 수 정보\nconst messageCountInfo=useMemo(()=>{if(messages.length<=MAX_MESSAGES)return null;return`${messages.length-MAX_MESSAGES}개의 이전 메시지가 숨겨져 있습니다.`;},[messages]);const handleMessageChange=e=>{setMessage(e.target.value);};const handleSubmit=e=>{e.preventDefault();if(message.trim()){onSendMessage(message);setMessage('');}};// 새 메시지가 추가될 때마다 스크롤을 아래로 이동\nuseEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[limitedMessages]);// 수동 스크롤 함수\nconst scrollToBottom=()=>{var _messagesEndRef$curre2;(_messagesEndRef$curre2=messagesEndRef.current)===null||_messagesEndRef$curre2===void 0?void 0:_messagesEndRef$curre2.scrollIntoView({behavior:'smooth'});};// 스크롤 이벤트 처리\nuseEffect(()=>{const handleScroll=()=>{// 스크롤 위치에 따른 추가 로직을 구현할 수 있음\n};const chatContainer=chatContainerRef.current;if(chatContainer){chatContainer.addEventListener('scroll',handleScroll);return()=>chatContainer.removeEventListener('scroll',handleScroll);}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"game-chat\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uCC44\\uD305\"}),/*#__PURE__*/_jsx(\"button\",{className:\"scroll-bottom-button\",onClick:scrollToBottom,title:\"\\uC2A4\\uD06C\\uB864 \\uC544\\uB798\\uB85C\",children:\"\\u2193\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-messages\",ref:chatContainerRef,children:[messageCountInfo&&/*#__PURE__*/_jsx(\"div\",{className:\"message-count-info\",children:messageCountInfo}),limitedMessages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-messages\",children:\"\\uC544\\uC9C1 \\uBA54\\uC2DC\\uC9C0\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}):limitedMessages.map(msg=>/*#__PURE__*/_jsxs(\"div\",{className:`chat-message ${msg.isSystem?'system-message':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"message-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-sender\",children:msg.sender}),/*#__PURE__*/_jsx(\"span\",{className:\"message-time\",children:new Date(msg.timestamp).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:msg.content})]},msg.id)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"chat-input-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:handleMessageChange,placeholder:\"\\uBA54\\uC2DC\\uC9C0\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694...\",className:\"chat-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"chat-send-button\",children:\"\\uC804\\uC1A1\"})]})]});};export default GameChat;","map":{"version":3,"names":["React","useState","useRef","useEffect","useMemo","jsx","_jsx","jsxs","_jsxs","GameChat","_ref","messages","onSendMessage","message","setMessage","messagesEndRef","chatContainerRef","MAX_MESSAGES","limitedMessages","length","slice","messageCountInfo","handleMessageChange","e","target","value","handleSubmit","preventDefault","trim","_messagesEndRef$curre","current","scrollIntoView","behavior","scrollToBottom","_messagesEndRef$curre2","handleScroll","chatContainer","addEventListener","removeEventListener","className","children","onClick","title","ref","map","msg","isSystem","sender","Date","timestamp","toLocaleTimeString","hour","minute","content","id","onSubmit","type","onChange","placeholder"],"sources":["C:/Users/USER/Desktop/ssssss/frontend/src/components/GameChat.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useMemo } from 'react';\nimport '../styles/GameChat.css';\n\nconst GameChat = ({ messages, onSendMessage }) => {\n  const [message, setMessage] = useState('');\n  const messagesEndRef = useRef(null);\n  const chatContainerRef = useRef(null);\n  \n  // 메시지 수 제한 (최대 50개)\n  const MAX_MESSAGES = 50;\n  \n  // 표시할 메시지 제한\n  const limitedMessages = useMemo(() => {\n    // 메시지가 MAX_MESSAGES를 초과하면 최신 메시지만 표시\n    return messages.length > MAX_MESSAGES \n      ? messages.slice(messages.length - MAX_MESSAGES) \n      : messages;\n  }, [messages]);\n  \n  // 메시지 수 정보\n  const messageCountInfo = useMemo(() => {\n    if (messages.length <= MAX_MESSAGES) return null;\n    return `${messages.length - MAX_MESSAGES}개의 이전 메시지가 숨겨져 있습니다.`;\n  }, [messages]);\n\n  const handleMessageChange = (e) => {\n    setMessage(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (message.trim()) {\n      onSendMessage(message);\n      setMessage('');\n    }\n  };\n\n  // 새 메시지가 추가될 때마다 스크롤을 아래로 이동\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [limitedMessages]);\n  \n  // 수동 스크롤 함수\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n  \n  // 스크롤 이벤트 처리\n  useEffect(() => {\n    const handleScroll = () => {\n      // 스크롤 위치에 따른 추가 로직을 구현할 수 있음\n    };\n    \n    const chatContainer = chatContainerRef.current;\n    if (chatContainer) {\n      chatContainer.addEventListener('scroll', handleScroll);\n      return () => chatContainer.removeEventListener('scroll', handleScroll);\n    }\n  }, []);\n\n  return (\n    <div className=\"game-chat\">\n      <div className=\"chat-header\">\n        <h3>채팅</h3>\n        <button \n          className=\"scroll-bottom-button\" \n          onClick={scrollToBottom}\n          title=\"스크롤 아래로\"\n        >\n          ↓\n        </button>\n      </div>\n      \n      <div className=\"chat-messages\" ref={chatContainerRef}>\n        {messageCountInfo && (\n          <div className=\"message-count-info\">\n            {messageCountInfo}\n          </div>\n        )}\n        \n        {limitedMessages.length === 0 ? (\n          <div className=\"no-messages\">아직 메시지가 없습니다.</div>\n        ) : (\n          limitedMessages.map(msg => (\n            <div \n              key={msg.id} \n              className={`chat-message ${msg.isSystem ? 'system-message' : ''}`}\n            >\n              <div className=\"message-header\">\n                <span className=\"message-sender\">{msg.sender}</span>\n                <span className=\"message-time\">\n                  {new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                </span>\n              </div>\n              <div className=\"message-content\">{msg.content}</div>\n            </div>\n          ))\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n      \n      <form className=\"chat-input-form\" onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          value={message}\n          onChange={handleMessageChange}\n          placeholder=\"메시지를 입력하세요...\"\n          className=\"chat-input\"\n        />\n        <button type=\"submit\" className=\"chat-send-button\">\n          전송\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default GameChat;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,CAAEC,OAAO,KAAQ,OAAO,CACnE,MAAO,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhC,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAAiC,IAAhC,CAAEC,QAAQ,CAAEC,aAAc,CAAC,CAAAF,IAAA,CAC3C,KAAM,CAACG,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAAc,cAAc,CAAGb,MAAM,CAAC,IAAI,CAAC,CACnC,KAAM,CAAAc,gBAAgB,CAAGd,MAAM,CAAC,IAAI,CAAC,CAErC;AACA,KAAM,CAAAe,YAAY,CAAG,EAAE,CAEvB;AACA,KAAM,CAAAC,eAAe,CAAGd,OAAO,CAAC,IAAM,CACpC;AACA,MAAO,CAAAO,QAAQ,CAACQ,MAAM,CAAGF,YAAY,CACjCN,QAAQ,CAACS,KAAK,CAACT,QAAQ,CAACQ,MAAM,CAAGF,YAAY,CAAC,CAC9CN,QAAQ,CACd,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd;AACA,KAAM,CAAAU,gBAAgB,CAAGjB,OAAO,CAAC,IAAM,CACrC,GAAIO,QAAQ,CAACQ,MAAM,EAAIF,YAAY,CAAE,MAAO,KAAI,CAChD,MAAO,GAAGN,QAAQ,CAACQ,MAAM,CAAGF,YAAY,sBAAsB,CAChE,CAAC,CAAE,CAACN,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAW,mBAAmB,CAAIC,CAAC,EAAK,CACjCT,UAAU,CAACS,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAC,YAAY,CAAIH,CAAC,EAAK,CAC1BA,CAAC,CAACI,cAAc,CAAC,CAAC,CAClB,GAAId,OAAO,CAACe,IAAI,CAAC,CAAC,CAAE,CAClBhB,aAAa,CAACC,OAAO,CAAC,CACtBC,UAAU,CAAC,EAAE,CAAC,CAChB,CACF,CAAC,CAED;AACAX,SAAS,CAAC,IAAM,KAAA0B,qBAAA,CACd,CAAAA,qBAAA,CAAAd,cAAc,CAACe,OAAO,UAAAD,qBAAA,iBAAtBA,qBAAA,CAAwBE,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAChE,CAAC,CAAE,CAACd,eAAe,CAAC,CAAC,CAErB;AACA,KAAM,CAAAe,cAAc,CAAGA,CAAA,GAAM,KAAAC,sBAAA,CAC3B,CAAAA,sBAAA,CAAAnB,cAAc,CAACe,OAAO,UAAAI,sBAAA,iBAAtBA,sBAAA,CAAwBH,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAChE,CAAC,CAED;AACA7B,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgC,YAAY,CAAGA,CAAA,GAAM,CACzB;AAAA,CACD,CAED,KAAM,CAAAC,aAAa,CAAGpB,gBAAgB,CAACc,OAAO,CAC9C,GAAIM,aAAa,CAAE,CACjBA,aAAa,CAACC,gBAAgB,CAAC,QAAQ,CAAEF,YAAY,CAAC,CACtD,MAAO,IAAMC,aAAa,CAACE,mBAAmB,CAAC,QAAQ,CAAEH,YAAY,CAAC,CACxE,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE3B,KAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBhC,KAAA,QAAK+B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BlC,IAAA,OAAAkC,QAAA,CAAI,cAAE,CAAI,CAAC,cACXlC,IAAA,WACEiC,SAAS,CAAC,sBAAsB,CAChCE,OAAO,CAAER,cAAe,CACxBS,KAAK,CAAC,uCAAS,CAAAF,QAAA,CAChB,QAED,CAAQ,CAAC,EACN,CAAC,cAENhC,KAAA,QAAK+B,SAAS,CAAC,eAAe,CAACI,GAAG,CAAE3B,gBAAiB,CAAAwB,QAAA,EAClDnB,gBAAgB,eACff,IAAA,QAAKiC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAChCnB,gBAAgB,CACd,CACN,CAEAH,eAAe,CAACC,MAAM,GAAK,CAAC,cAC3Bb,IAAA,QAAKiC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,iEAAa,CAAK,CAAC,CAEhDtB,eAAe,CAAC0B,GAAG,CAACC,GAAG,eACrBrC,KAAA,QAEE+B,SAAS,CAAE,gBAAgBM,GAAG,CAACC,QAAQ,CAAG,gBAAgB,CAAG,EAAE,EAAG,CAAAN,QAAA,eAElEhC,KAAA,QAAK+B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BlC,IAAA,SAAMiC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAEK,GAAG,CAACE,MAAM,CAAO,CAAC,cACpDzC,IAAA,SAAMiC,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC3B,GAAI,CAAAQ,IAAI,CAACH,GAAG,CAACI,SAAS,CAAC,CAACC,kBAAkB,CAAC,EAAE,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,MAAM,CAAE,SAAU,CAAC,CAAC,CACnF,CAAC,EACJ,CAAC,cACN9C,IAAA,QAAKiC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEK,GAAG,CAACQ,OAAO,CAAM,CAAC,GAT/CR,GAAG,CAACS,EAUN,CACN,CACF,cACDhD,IAAA,QAAKqC,GAAG,CAAE5B,cAAe,CAAE,CAAC,EACzB,CAAC,cAENP,KAAA,SAAM+B,SAAS,CAAC,iBAAiB,CAACgB,QAAQ,CAAE7B,YAAa,CAAAc,QAAA,eACvDlC,IAAA,UACEkD,IAAI,CAAC,MAAM,CACX/B,KAAK,CAAEZ,OAAQ,CACf4C,QAAQ,CAAEnC,mBAAoB,CAC9BoC,WAAW,CAAC,4DAAe,CAC3BnB,SAAS,CAAC,YAAY,CACvB,CAAC,cACFjC,IAAA,WAAQkD,IAAI,CAAC,QAAQ,CAACjB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,cAEnD,CAAQ,CAAC,EACL,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/B,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}